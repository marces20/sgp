@(ret: java.util.Map[String,java.util.Map[String,java.util.Map[String,java.math.BigDecimal]]],p:List[models.Periodo])
@import helper._
@import utils._
@import models.auth._
@implicitFieldConstructor = @{ FieldConstructor(simpleInput.render) }
@import java.math.BigDecimal;var total=new java.math.BigDecimal(0);var totaltmp=new java.math.BigDecimal(0);var totaltmp2=new java.math.BigDecimal(0);
@import java.util.HashMap;var totales=new java.util.HashMap[String,java.math.BigDecimal];var totalesTmp=new java.util.HashMap[String,java.math.BigDecimal];

@scripts = {
	<script src="@routes.Assets.at("javascripts/informes/informes.js")" type="text/javascript"></script>
}

@views.html.informes.mainInformes("Informe Mensual Obligaciones",scripts) {

<div class="page-header">
	<div class="row">
		<div class="col-sm-7">
			<h1>Obligaciones Por Institucion</h1>
		</div>
	</div>
</div>

<table class="table table-bordered">
		<tr>

		</tr>

	@for((key,value) <- ret) {
		<tr>
			<td colspan="8">@key</td>
		</tr>
		<tr>
			<td colspan=""></td>
			@for(valuep <- p) {
				<td>@valuep.nombre</td>
			}
		</tr>
		@for((key2,value2) <- value) {
			<tr>
				<td>@key2</td>
				@for(valuep <- p) {
					<td><a href="#" data-url="@controllers.informes.routes.InformeMensualController.getObligacionPorOrganigramaPorRubroPorPeriodo(key,key2, valuep.id)"
					class="infoObligaciones" >@utils.NumberUtils.monedaSinDecimales(value2.get(valuep.nombre))</a></td>

						@if(totales.containsKey(valuep.nombre)){

							@{totaltmp = totales.get(valuep.nombre)}

							@if(value2.get(valuep.nombre) != null){
								@{totaltmp  = totaltmp.add(value2.get(valuep.nombre))}
							}


							@{totaltmp2 = totales.put(valuep.nombre,totaltmp)}


						}else{
							@{totaltmp2 = totales.put(valuep.nombre,value2.get(valuep.nombre))}
						}

				}
			</tr>
		}

			<tr>
				<td>TOTALES</td>
				@for(valuepx <- p) {
				<td>@utils.NumberUtils.monedaSinDecimales(totales.get(valuepx.nombre))</td>
				}
			</tr>

	}


</table>

}